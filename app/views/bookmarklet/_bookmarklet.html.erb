<script>
javascript:
  (function(){
    var notHTML=/(pdf|gif|jpg|jpeg|png|css|js|mov)$/i;
    if(notHTML.test(location.href)){
      location.href='<%# nonhtml_new_bookmarklet_url(:only_path => false, :uuid => @user.uuid) %>';
      return;
    };
    var d,n1,a,h,ac,l,ls,ss,m,ms,mp,mps,f,pjs,ejs,appjs,rjs;
    var d=document;
    var n1=d.body.firstChild;
    var a=function(o){d.body.insertBefore(o,n1)};
    var h=d.getElementsByTagName('head')[0];
    var ac=function(o){h.appendChild(o)};
    l=d.createElement('div');
    l.innerHTML='Loading..';
    l.id='loadinghomemarks';
    ls=l.style;
    ls.position='fixed';
    ls.top='0';
    ls.left='9px';
    ls.backgroundColor='#f00';
    ls.color='#fff';
    ls.font='normal 14px sans-serif';
    ls.padding='6px';
    ls.zIndex='799';
    ls.textDecoration='blink';
    a(l);
    ss=d.createElement('link');
    ss.rel='stylesheet';
    ss.type='text/css';
    ss.href='http://<%= HmConfig.app[:host] %>/stylesheets/bookmarklet.css';
    ac(ss);
    m=d.createElement('div');
    m.id='modalmask';
    ms=m.style;
    ms.display='none';
    mp=d.createElement('div');
    mp.id='modal_progress';
    mps=mp.style;
    mps.display='none';
    m.appendChild(mp);
    a(m);
    f=d.createElement('div');
    f.id='modal_html_ap-wrapper';
    a(f);
    pjs=d.createElement('script');
    pjs.type='text/javascript';
    pjs.src='http://ajax.googleapis.com/ajax/libs/prototype/1.6.0.2/prototype.js';
    a(pjs);
    ejs=d.createElement('script');
    ejs.type='text/javascript';
    ejs.src='http://ajax.googleapis.com/ajax/libs/scriptaculous/1.8.1/effects.js';
    a(ejs);
    appjs=d.createElement('script');
    appjs.type='text/javascript';
    appjs.src='http://<%= HmConfig.app[:host] %>/javascripts/homemarks_core.js';
    a(appjs);
    rjs=d.createElement('script');
    rjs.type='text/javascript';
    rjs.src='<%= new_bookmarklet_url(:only_path => false, :uuid => current_user.uuid) %>';
    a(rjs);
    })
    ();
</script>